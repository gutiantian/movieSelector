<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <p:dialog header="Movie Info" widgetVar="movieDialog" height="500" resizable="false" modal="true">
        <h:form id="dlgform">
            <p:outputPanel id="movieDetail" style="width: 600px; font-size:13px">
                <p:panelGrid style="text-align: left; width: 100%">
                    <f:facet name="header">
                        <p:row>
                            <p:column colspan="2">
                                <p:graphicImage url="#{movieDialogController.selectedMovie.poster}" /> 
                            </p:column>
                        </p:row>
                    </f:facet>

                    <p:row>
                        <p:column style="text-align: center">Title:</p:column>
                        <p:column style="text-align: center">
                            <h:outputText value="#{movieDialogController.selectedMovie.title}"/>
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column style="text-align: center">Year:</p:column>
                        <p:column style="text-align: center">
                            <h:outputText value="#{movieDialogController.selectedMovie.year}"/>
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column style="text-align: center">Runtime:</p:column>
                        <p:column style="text-align: center">
                            <h:outputText value="#{movieDialogController.selectedMovie.runtime}"/>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not empty movieDialogController.selectedMovie.genres}">
                        <p:column style="text-align: center">Genre(s):</p:column>
                        <p:column style="text-align: center">
                            <h:outputText value="#{movieDialogController.selectedMovie.genres}"/>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not empty movieDialogController.selectedMovie.directors}">
                        <p:column style="text-align: center">Director(s):</p:column>
                        <p:column style="text-align: center">
                            <h:outputText value="#{movieDialogController.selectedMovie.directors}"/>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not empty movieDialogController.selectedMovie.cast}">
                        <p:column style="text-align: center">Cast:</p:column>
                        <p:column style="text-align: center">
                            <h:outputText value="#{movieDialogController.selectedMovie.cast}"/>
                        </p:column>
                    </p:row>

                    <p:row rendered="#{not empty movieDialogController.selectedMovie.theaterRelease}">
                        <p:column style="width: 200px; text-align: center">Theater Release Date:</p:column>
                        <p:column style="text-align: center">
                            <h:outputText value="#{movieDialogController.selectedMovie.theaterRelease}" />
                        </p:column>
                     </p:row>

                    <p:row rendered="#{not empty movieDialogController.selectedMovie.DVDRelease}">
                        <p:column style="width: 200px; text-align: center">DVD Release Date:</p:column>
                        <p:column style="text-align: center">
                            <h:outputText value="#{movieDialogController.selectedMovie.DVDRelease}" />
                        </p:column>
                    </p:row>

                    <p:row rendered="#{not empty movieDialogController.selectedMovie.synopsis}">
                        <p:column style="text-align: center">Synopsis:</p:column>
                        <p:column>
                                <h:outputText value="#{movieDialogController.selectedMovie.synopsis}" style="height: 100px; overflow-y: scroll; display:block;"/>
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column style="text-align: center">Your Rating</p:column>
                        <p:column>
                            <p:rating  style=" width: 96px; margin: 0 auto" value="#{movieDialogController.score}"/>
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column style="text-align: center">Average Score:</p:column>
                        <p:column style="text-align: center">
                            <h:outputText value="#{movieDialogController.selectedMovie.avgScore}" 
                                          rendered="#{not empty movieDialogController.selectedMovie.ratings}" 
                            />
                            <h:outputText value="No Rating Record" rendered="#{empty movieDialogController.selectedMovie.ratings}" />
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column style="text-align: center">Your Comment:</p:column>
                        <p:column>
                            <p:inplace id="interestinplace" label="#{movieDialogController.commentLabel}" effectSpeed="fast">
                                <h:panelGrid columns="1">
                                    <p:inputTextarea id="interest" rows="5" cols="50" value="#{movieDialogController.comment}"
                                                     counter="display"  maxlength="256" 
                                                     counterTemplate="{0} characters remaining." 
                                                     style="height: 100px; overflow-y: scroll;"
                                    />
                                    <h:outputText id="display"/>
                            </h:panelGrid>
                            </p:inplace>
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column colspan="2" style="text-align: center">
                            <p:commandButton value="Submit" icon="ui-icon-check" update=":form:growl" actionListener="#{movieDialogController.submitRating}" />
                        </p:column>
                    </p:row>
                    
                </p:panelGrid>
            </p:outputPanel>
        </h:form>
    </p:dialog>
</ui:composition>